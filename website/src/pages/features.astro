---
import BaseLayout from '../layouts/BaseLayout.astro';
import Header from '../components/landing/Header.astro';
import Footer from '../components/landing/Footer.astro';
import { FadeIn } from '../components/ui/Motion';
import { Layers, Brain, Database, Shield, Radio, Code, Zap, Check } from 'lucide-react';

const title = "Features - SuperLocalMemory V2";
const description = "Explore advanced features: hybrid search, knowledge graphs, pattern learning, and universal integration.";

const coreFeatures = [
    {
        icon: Brain,
        title: "Adaptive Learning (v2.7)",
        desc: "Learns your preferences and workflows locally using LightGBM. Surfaces the right memories for the right project context.",
        badge: "NEW",
        wiki: "PATTERN-LEARNING"
    },
    {
        icon: Radio,
        title: "A2A Protocol (v2.8)",
        desc: "Agent-to-Agent collaboration. Let Cursor, Claude, and your terminal agents communicate and sync state.",
        badge: "PREVIEW",
        wiki: "ARCHITECTURE-V2.5"
    },
    {
        icon: Shield,
        title: "Privacy First",
        desc: "GDPR compliant by design. Your behavioral data is isolated in learning.db and never leaves your machine.",
        wiki: "ARCHITECTURE"
    },
    {
        icon: Database,
        title: "Hybrid Search",
        desc: "Combines Semantic (Vector), Full-Text, and Graph traversal for 10ms retrieval with high accuracy.",
        wiki: "SEARCH-ENGINE-V2.2.0"
    },
    {
        icon: Zap,
        title: "Zero Latency",
        desc: "No API calls. No network round-trips. Instant retrieval from your local NVMe storage.",
        wiki: "ARCHITECTURE"
    },
    {
        icon: Code,
        title: "Universal Integration",
        desc: "Works with Cursor, Windsurf, VS Code, Claude Desktop, and CLI simultaneously.",
        wiki: "UNIVERSAL-INTEGRATION"
    }
];

const architectureLayers = [
    "Layer 10: A2A AGENT COLLABORATION (v2.8)",
    "Layer 9: VISUALIZATION (v2.2.0)",
    "Layer 8: HYBRID SEARCH (v2.2.0)",
    "Layer 7: UNIVERSAL ACCESS",
    "Layer 6: MCP INTEGRATION",
    "Layer 5.5: ADAPTIVE LEARNING (v2.7)",
    "Layer 5: SKILLS LAYER",
    "Layer 4: PATTERN LEARNING + MACLA",
    "Layer 3: KNOWLEDGE GRAPH + HIERARCHICAL",
    "Layer 2: HIERARCHICAL INDEX",
    "Layer 1: RAW STORAGE (SQLite + FTS5)"
];
---

<BaseLayout title={title} description={description}>
  <Header />
  
  <main class="pt-24 pb-24 min-h-screen bg-[var(--color-bg-main)]">
    
    <!-- Hero -->
    <section class="container-custom mb-20 text-center">
      <FadeIn client:load>
        <span class="text-[var(--color-primary)] font-mono text-sm tracking-wider uppercase mb-4 block">Feature Tour</span>
        <h1 class="text-5xl md:text-6xl font-bold mb-6">
          Intelligence, <span class="text-gradient">Decentralized.</span>
        </h1>
        <p class="text-xl text-[var(--color-text-muted)] max-w-2xl mx-auto">
          From local vectors to hierarchical knowledge graphs. See what makes SuperLocalMemory the most advanced local memory system.
        </p>
      </FadeIn>
    </section>

    <!-- Core Features Grid -->
    <section class="container-custom mb-24">
        <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
            {coreFeatures.map((feat, i) => (
                <FadeIn client:visible delay={i * 0.1}>
                    <div class="h-full glass-panel p-8 rounded-2xl border border-white/10 hover:border-[var(--color-primary)]/30 hover:bg-white/5 transition-all group">
                        <div class="flex justify-between items-start mb-6">
                            <div class="p-3 bg-white/5 rounded-xl text-[var(--color-primary)] group-hover:scale-110 transition-transform">
                                <feat.icon className="w-8 h-8" />
                            </div>
                            {feat.badge && (
                                <span class="px-2 py-1 rounded bg-[var(--color-primary)]/20 text-[var(--color-primary)] text-xs font-bold border border-[var(--color-primary)]/20">
                                    {feat.badge}
                                </span>
                            )}
                        </div>
                        <h3 class="text-xl font-bold mb-3">{feat.title}</h3>
                        <p class="text-[var(--color-text-muted)] leading-relaxed">{feat.desc}</p>
                        {feat.wiki && (
                            <a href={`https://github.com/varun369/SuperLocalMemoryV2/blob/main/docs/${feat.wiki}.md`} target="_blank" rel="noopener" class="inline-flex items-center gap-1 text-sm font-bold text-[var(--color-primary)] mt-4 hover:underline">
                                View Wiki <Check className="w-4 h-4" />
                            </a>
                        )}
                    </div>
                </FadeIn>
            ))}
        </div>
    </section>

    <!-- Architecture Stack -->
    <section class="container-custom mb-24">
        <div class="glass-panel p-8 md:p-12 rounded-3xl border border-white/10 bg-gradient-to-b from-[var(--color-bg-secondary)] to-[var(--color-bg-main)]">
            <div class="grid md:grid-cols-2 gap-12 items-center">
                <div>
                    <h2 class="text-3xl font-bold mb-6">10-Layer Universal Architecture</h2>
                    <p class="text-[var(--color-text-muted)] mb-8">
                        The only memory system built with a complete vertical stack, from raw SQLite storage up to Agent-to-Agent protocol negotiation.
                    </p>
                    <a href="/architecture" class="text-[var(--color-primary)] font-bold hover:underline flex items-center gap-2">
                        Explore Full Architecture <Layers className="w-4 h-4" />
                    </a>
                </div>
                <div class="bg-black/40 rounded-xl p-6 border border-white/10 font-mono text-sm leading-8 text-green-400/80 shadow-2xl">
                    {architectureLayers.map(layer => (
                        <div class="border-b border-white/5 py-1 whitespace-nowrap overflow-hidden text-ellipsis">
                            {layer}
                        </div>
                    ))}
                </div>
            </div>
        </div>
    </section>

    <!-- Detailed Sections -->
    <section class="container-custom space-y-24">
        
        <!-- Adaptive Learning -->
        <FadeIn client:visible>
            <div class="grid md:grid-cols-2 gap-12 items-center">
                <div class="order-2 md:order-1 relative">
                    <div class="absolute inset-0 bg-[var(--color-primary)]/20 blur-3xl rounded-full"></div>
                    <div class="relative glass-panel p-8 rounded-2xl border border-white/10">
                        <div class="space-y-4">
                            <div class="p-4 bg-white/5 rounded-lg border-l-4 border-[var(--color-primary)]">
                                <div class="text-xs text-[var(--color-text-muted)] mb-1">Layer 1: Cross-Project</div>
                                <div class="font-bold">Transferable Tech Preferences</div>
                            </div>
                            <div class="p-4 bg-white/5 rounded-lg border-l-4 border-[var(--color-accent)]">
                                <div class="text-xs text-[var(--color-text-muted)] mb-1">Layer 2: Context</div>
                                <div class="font-bold">Project Signal Detection</div>
                            </div>
                            <div class="p-4 bg-white/5 rounded-lg border-l-4 border-purple-500">
                                <div class="text-xs text-[var(--color-text-muted)] mb-1">Layer 3: Workflow</div>
                                <div class="font-bold">Sequence Mining (PrefixSpan)</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="order-1 md:order-2">
                    <h2 class="text-3xl font-bold mb-6">Your AI Learns <span class="text-gradient">You</span></h2>
                    <p class="text-[var(--color-text-muted)] text-lg mb-6">
                        Most memory systems just store text. We store <strong>patterns</strong>. SuperLocalMemory observes which memories you actually use and re-ranks future results based on your unique workflow.
                    </p>
                    <ul class="space-y-3 mb-8">
                        <li class="flex items-center gap-2"><Check className="w-5 h-5 text-green-400" /> 3-Layer Local ML Model</li>
                        <li class="flex items-center gap-2"><Check className="w-5 h-5 text-green-400" /> LightGBM LambdaRank Re-ranking</li>
                        <li class="flex items-center gap-2"><Check className="w-5 h-5 text-green-400" /> Zero Telemetry (Training is Local)</li>
                    </ul>
                </div>
            </div>
        </FadeIn>

    </section>
  </main>
  <Footer />
</BaseLayout>

