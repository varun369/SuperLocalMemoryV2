<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SuperLocalMemory V2 â€” Architecture</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Chakra+Petch:wght@400;500;600;700&family=Share+Tech+Mono&family=Lexend+Deca:wght@300;400;500;600&display=swap" rel="stylesheet">
<style>
  :root {
    --bg-deep: #06080f;
    --bg-surface: #0c1018;
    --bg-card: #111827;
    --text-primary: #e2e8f0;
    --text-secondary: #94a3b8;
    --text-muted: #64748b;
    --border: #1e293b;

    --l1: #f59e0b; --l1-bg: rgba(245,158,11,0.08);
    --l2: #f97316; --l2-bg: rgba(249,115,22,0.08);
    --l3: #ef4444; --l3-bg: rgba(239,68,68,0.08);
    --l4: #ec4899; --l4-bg: rgba(236,72,153,0.08);
    --l5: #a855f7; --l5-bg: rgba(168,85,247,0.08);
    --l6: #8b5cf6; --l6-bg: rgba(139,92,246,0.08);
    --l7: #6366f1; --l7-bg: rgba(99,102,241,0.08);
    --l8: #3b82f6; --l8-bg: rgba(59,130,246,0.08);
    --l9: #06b6d4; --l9-bg: rgba(6,182,212,0.08);
    --l10: #10b981; --l10-bg: rgba(16,185,129,0.08);

    --mcp-color: #8b5cf6;
    --a2a-color: #10b981;
    --v25-accent: #f59e0b;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    background: var(--bg-deep);
    color: var(--text-primary);
    font-family: 'Lexend Deca', sans-serif;
    font-weight: 400;
    min-height: 100vh;
    overflow-x: hidden;
  }

  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background:
      linear-gradient(rgba(99,102,241,0.03) 1px, transparent 1px),
      linear-gradient(90deg, rgba(99,102,241,0.03) 1px, transparent 1px);
    background-size: 40px 40px;
    pointer-events: none;
    z-index: 0;
  }

  .header {
    position: relative;
    z-index: 1;
    text-align: center;
    padding: 48px 24px 20px;
    border-bottom: 1px solid var(--border);
    background: linear-gradient(180deg, rgba(99,102,241,0.06) 0%, transparent 100%);
  }

  .header h1 {
    font-family: 'Chakra Petch', sans-serif;
    font-weight: 700;
    font-size: clamp(28px, 4vw, 44px);
    letter-spacing: 2px;
    text-transform: uppercase;
    background: linear-gradient(135deg, var(--l1) 0%, var(--l3) 25%, var(--l6) 50%, var(--l9) 75%, var(--l10) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .header .subtitle {
    font-family: 'Share Tech Mono', monospace;
    font-size: 14px;
    color: var(--text-muted);
    margin-top: 8px;
    letter-spacing: 3px;
  }

  .header .version-badge {
    display: inline-block;
    margin-top: 12px;
    padding: 4px 14px;
    border: 1px solid var(--v25-accent);
    border-radius: 20px;
    font-family: 'Share Tech Mono', monospace;
    font-size: 11px;
    color: var(--v25-accent);
    background: rgba(245,158,11,0.08);
    animation: pulse-border 3s ease-in-out infinite;
  }

  @keyframes pulse-border {
    0%, 100% { box-shadow: 0 0 4px rgba(245,158,11,0.2); }
    50% { box-shadow: 0 0 16px rgba(245,158,11,0.5); }
  }

  .main {
    position: relative;
    z-index: 1;
    display: grid;
    grid-template-columns: 240px 1fr 240px;
    gap: 0;
    max-width: 1400px;
    margin: 0 auto;
    padding: 40px 24px;
    min-height: 700px;
  }

  @media (max-width: 1000px) {
    .main { grid-template-columns: 1fr; gap: 32px; }
    .protocol-panel { flex-direction: row !important; flex-wrap: wrap; justify-content: center; }
  }

  .protocol-panel {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    gap: 16px;
    padding: 20px 12px;
  }

  .protocol-label {
    font-family: 'Chakra Petch', sans-serif;
    font-weight: 600;
    font-size: 18px;
    letter-spacing: 2px;
    text-transform: uppercase;
    text-align: center;
  }

  .protocol-label.mcp { color: var(--mcp-color); }
  .protocol-label.a2a { color: var(--a2a-color); }

  .protocol-direction {
    font-family: 'Share Tech Mono', monospace;
    font-size: 11px;
    color: var(--text-muted);
    text-align: center;
  }

  .protocol-badge {
    display: inline-block;
    padding: 3px 10px;
    border-radius: 12px;
    font-family: 'Share Tech Mono', monospace;
    font-size: 10px;
    letter-spacing: 1px;
  }

  .badge-live { background: rgba(16,185,129,0.15); color: #34d399; border: 1px solid rgba(16,185,129,0.3); }
  .badge-planned { background: rgba(245,158,11,0.12); color: #fbbf24; border: 1px solid rgba(245,158,11,0.3); }
  .badge-v25 { background: rgba(245,158,11,0.12); color: #fbbf24; border: 1px solid rgba(245,158,11,0.3); animation: pulse-border 3s ease-in-out infinite; }

  .agent-list {
    display: flex;
    flex-direction: column;
    gap: 6px;
    margin-top: 8px;
  }

  .agent-chip {
    padding: 5px 12px;
    border-radius: 6px;
    font-size: 12px;
    font-weight: 500;
    text-align: center;
    background: var(--bg-card);
    border: 1px solid var(--border);
    color: var(--text-secondary);
    transition: all 0.2s;
  }

  .agent-chip:hover {
    border-color: var(--mcp-color);
    color: var(--text-primary);
    transform: translateX(4px);
  }

  .protocol-panel.a2a .agent-chip:hover {
    border-color: var(--a2a-color);
    transform: translateX(-4px);
  }

  .stack {
    display: flex;
    flex-direction: column-reverse;
    gap: 4px;
    justify-content: center;
    position: relative;
  }

  .layer {
    position: relative;
    display: grid;
    grid-template-columns: 44px 1fr auto;
    align-items: center;
    gap: 12px;
    padding: 12px 16px;
    border-radius: 8px;
    border: 1px solid transparent;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
    overflow: hidden;
  }

  .layer::before {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: 8px;
    opacity: 0;
    transition: opacity 0.3s;
  }

  .layer:hover { transform: scaleX(1.02); z-index: 2; }
  .layer:hover::before { opacity: 1; }

  .layer .num {
    font-family: 'Chakra Petch', sans-serif;
    font-weight: 700;
    font-size: 20px;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 8px;
    flex-shrink: 0;
  }

  .layer .info { min-width: 0; }

  .layer .name {
    font-family: 'Chakra Petch', sans-serif;
    font-weight: 600;
    font-size: 15px;
    letter-spacing: 0.5px;
  }

  .layer .file {
    font-family: 'Share Tech Mono', monospace;
    font-size: 11px;
    margin-top: 2px;
    opacity: 0.6;
  }

  .layer .tags {
    display: flex;
    gap: 6px;
    flex-wrap: wrap;
    justify-content: flex-end;
  }

  .layer .tag {
    padding: 2px 8px;
    border-radius: 4px;
    font-size: 10px;
    font-family: 'Share Tech Mono', monospace;
    white-space: nowrap;
    background: rgba(255,255,255,0.05);
    color: var(--text-muted);
  }

  .layer[data-layer="1"]  { background: var(--l1-bg); border-color: rgba(245,158,11,0.15); }
  .layer[data-layer="1"]  .num { background: rgba(245,158,11,0.15); color: var(--l1); }
  .layer[data-layer="1"]  .name { color: var(--l1); }
  .layer[data-layer="1"]:hover { border-color: var(--l1); box-shadow: 0 0 24px rgba(245,158,11,0.15); }
  .layer[data-layer="1"]::before { background: linear-gradient(90deg, rgba(245,158,11,0.06) 0%, transparent 100%); }

  .layer[data-layer="2"]  { background: var(--l2-bg); border-color: rgba(249,115,22,0.15); }
  .layer[data-layer="2"]  .num { background: rgba(249,115,22,0.15); color: var(--l2); }
  .layer[data-layer="2"]  .name { color: var(--l2); }
  .layer[data-layer="2"]:hover { border-color: var(--l2); box-shadow: 0 0 24px rgba(249,115,22,0.15); }
  .layer[data-layer="2"]::before { background: linear-gradient(90deg, rgba(249,115,22,0.06) 0%, transparent 100%); }

  .layer[data-layer="3"]  { background: var(--l3-bg); border-color: rgba(239,68,68,0.15); }
  .layer[data-layer="3"]  .num { background: rgba(239,68,68,0.15); color: var(--l3); }
  .layer[data-layer="3"]  .name { color: var(--l3); }
  .layer[data-layer="3"]:hover { border-color: var(--l3); box-shadow: 0 0 24px rgba(239,68,68,0.15); }
  .layer[data-layer="3"]::before { background: linear-gradient(90deg, rgba(239,68,68,0.06) 0%, transparent 100%); }

  .layer[data-layer="4"]  { background: var(--l4-bg); border-color: rgba(236,72,153,0.15); }
  .layer[data-layer="4"]  .num { background: rgba(236,72,153,0.15); color: var(--l4); }
  .layer[data-layer="4"]  .name { color: var(--l4); }
  .layer[data-layer="4"]:hover { border-color: var(--l4); box-shadow: 0 0 24px rgba(236,72,153,0.15); }
  .layer[data-layer="4"]::before { background: linear-gradient(90deg, rgba(236,72,153,0.06) 0%, transparent 100%); }

  .layer[data-layer="5"]  { background: var(--l5-bg); border-color: rgba(168,85,247,0.15); }
  .layer[data-layer="5"]  .num { background: rgba(168,85,247,0.15); color: var(--l5); }
  .layer[data-layer="5"]  .name { color: var(--l5); }
  .layer[data-layer="5"]:hover { border-color: var(--l5); box-shadow: 0 0 24px rgba(168,85,247,0.15); }
  .layer[data-layer="5"]::before { background: linear-gradient(90deg, rgba(168,85,247,0.06) 0%, transparent 100%); }

  .layer[data-layer="6"]  { background: var(--l6-bg); border-color: rgba(139,92,246,0.15); }
  .layer[data-layer="6"]  .num { background: rgba(139,92,246,0.15); color: var(--l6); }
  .layer[data-layer="6"]  .name { color: var(--l6); }
  .layer[data-layer="6"]:hover { border-color: var(--l6); box-shadow: 0 0 24px rgba(139,92,246,0.15); }
  .layer[data-layer="6"]::before { background: linear-gradient(90deg, rgba(139,92,246,0.06) 0%, transparent 100%); }

  .layer[data-layer="7"]  { background: var(--l7-bg); border-color: rgba(99,102,241,0.15); }
  .layer[data-layer="7"]  .num { background: rgba(99,102,241,0.15); color: var(--l7); }
  .layer[data-layer="7"]  .name { color: var(--l7); }
  .layer[data-layer="7"]:hover { border-color: var(--l7); box-shadow: 0 0 24px rgba(99,102,241,0.15); }
  .layer[data-layer="7"]::before { background: linear-gradient(90deg, rgba(99,102,241,0.06) 0%, transparent 100%); }

  .layer[data-layer="8"]  { background: var(--l8-bg); border-color: rgba(59,130,246,0.15); }
  .layer[data-layer="8"]  .num { background: rgba(59,130,246,0.15); color: var(--l8); }
  .layer[data-layer="8"]  .name { color: var(--l8); }
  .layer[data-layer="8"]:hover { border-color: var(--l8); box-shadow: 0 0 24px rgba(59,130,246,0.15); }
  .layer[data-layer="8"]::before { background: linear-gradient(90deg, rgba(59,130,246,0.06) 0%, transparent 100%); }

  .layer[data-layer="9"]  { background: var(--l9-bg); border-color: rgba(6,182,212,0.15); }
  .layer[data-layer="9"]  .num { background: rgba(6,182,212,0.15); color: var(--l9); }
  .layer[data-layer="9"]  .name { color: var(--l9); }
  .layer[data-layer="9"]:hover { border-color: var(--l9); box-shadow: 0 0 24px rgba(6,182,212,0.15); }
  .layer[data-layer="9"]::before { background: linear-gradient(90deg, rgba(6,182,212,0.06) 0%, transparent 100%); }

  .layer[data-layer="10"] { background: var(--l10-bg); border-color: rgba(16,185,129,0.15); }
  .layer[data-layer="10"] .num { background: rgba(16,185,129,0.15); color: var(--l10); }
  .layer[data-layer="10"] .name { color: var(--l10); }
  .layer[data-layer="10"]:hover { border-color: var(--l10); box-shadow: 0 0 24px rgba(16,185,129,0.15); }
  .layer[data-layer="10"]::before { background: linear-gradient(90deg, rgba(16,185,129,0.06) 0%, transparent 100%); }

  .layer[data-layer="1"] .num {
    animation: heartbeat 2.5s ease-in-out infinite;
  }

  @keyframes heartbeat {
    0%, 100% { transform: scale(1); }
    14% { transform: scale(1.12); }
    28% { transform: scale(1); }
    42% { transform: scale(1.08); }
    56% { transform: scale(1); }
  }

  .detail-overlay {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(6,8,15,0.7);
    backdrop-filter: blur(8px);
    z-index: 100;
    justify-content: center;
    align-items: center;
    padding: 24px;
    animation: fadeIn 0.2s ease;
  }

  .detail-overlay.active { display: flex; }
  @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

  .detail-card {
    background: var(--bg-surface);
    border: 1px solid var(--border);
    border-radius: 16px;
    padding: 32px;
    max-width: 600px;
    width: 100%;
    position: relative;
    animation: slideUp 0.3s cubic-bezier(0.16, 1, 0.3, 1);
  }

  @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

  .detail-card .close-btn {
    position: absolute;
    top: 16px;
    right: 16px;
    width: 32px;
    height: 32px;
    border: 1px solid var(--border);
    border-radius: 8px;
    background: var(--bg-card);
    color: var(--text-muted);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 16px;
    transition: all 0.2s;
  }

  .detail-card .close-btn:hover { border-color: var(--text-secondary); color: var(--text-primary); }

  .detail-card .detail-num {
    font-family: 'Chakra Petch', sans-serif;
    font-weight: 700;
    font-size: 48px;
    line-height: 1;
    opacity: 0.15;
    position: absolute;
    top: 24px;
    left: 32px;
  }

  .detail-card .detail-title {
    font-family: 'Chakra Petch', sans-serif;
    font-weight: 600;
    font-size: 22px;
    margin-bottom: 4px;
  }

  .detail-card .detail-file {
    font-family: 'Share Tech Mono', monospace;
    font-size: 13px;
    color: var(--text-muted);
    margin-bottom: 16px;
  }

  .detail-card .detail-desc {
    font-size: 14px;
    line-height: 1.7;
    color: var(--text-secondary);
    margin-bottom: 16px;
  }

  .detail-card .detail-features {
    list-style: none;
    display: flex;
    flex-direction: column;
    gap: 8px;
  }

  .detail-card .detail-features li {
    padding: 8px 12px;
    background: var(--bg-card);
    border-radius: 6px;
    font-size: 13px;
    color: var(--text-secondary);
    border-left: 3px solid var(--border);
  }

  .detail-card .research-ref {
    margin-top: 16px;
    padding: 10px 14px;
    background: rgba(99,102,241,0.06);
    border: 1px solid rgba(99,102,241,0.15);
    border-radius: 8px;
    font-family: 'Share Tech Mono', monospace;
    font-size: 11px;
    color: var(--text-muted);
  }

  .v25-section {
    position: relative;
    z-index: 1;
    max-width: 1400px;
    margin: 0 auto;
    padding: 32px 24px 48px;
  }

  .v25-header {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 24px;
    padding-bottom: 16px;
    border-bottom: 1px solid var(--border);
  }

  .v25-header h2 {
    font-family: 'Chakra Petch', sans-serif;
    font-weight: 600;
    font-size: 20px;
    color: var(--v25-accent);
    letter-spacing: 1px;
  }

  .v25-header .tagline {
    font-family: 'Share Tech Mono', monospace;
    font-size: 12px;
    color: var(--text-muted);
    padding: 3px 10px;
    border: 1px dashed rgba(245,158,11,0.3);
    border-radius: 4px;
  }

  .v25-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 12px;
  }

  .v25-card {
    padding: 16px;
    background: var(--bg-card);
    border: 1px dashed rgba(245,158,11,0.2);
    border-radius: 10px;
    transition: all 0.3s;
    position: relative;
    overflow: hidden;
  }

  .v25-card::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 3px;
    height: 100%;
    background: var(--v25-accent);
    opacity: 0.4;
    transition: opacity 0.3s;
  }

  .v25-card:hover {
    border-color: rgba(245,158,11,0.5);
    box-shadow: 0 0 20px rgba(245,158,11,0.08);
    transform: translateY(-2px);
  }

  .v25-card:hover::after { opacity: 1; }

  .v25-card.prerequisite { border-color: rgba(239,68,68,0.3); border-style: solid; }
  .v25-card.prerequisite::after { background: var(--l3); }

  .v25-card .card-name {
    font-family: 'Chakra Petch', sans-serif;
    font-weight: 600;
    font-size: 14px;
    color: var(--text-primary);
    margin-bottom: 2px;
  }

  .v25-card .card-file {
    font-family: 'Share Tech Mono', monospace;
    font-size: 11px;
    color: var(--text-muted);
    margin-bottom: 8px;
  }

  .v25-card .card-desc {
    font-size: 12px;
    color: var(--text-secondary);
    line-height: 1.5;
  }

  .v25-card .prereq-badge {
    position: absolute;
    top: 8px;
    right: 8px;
    font-family: 'Share Tech Mono', monospace;
    font-size: 9px;
    padding: 2px 8px;
    border-radius: 4px;
    background: rgba(239,68,68,0.15);
    color: #f87171;
    letter-spacing: 1px;
  }

  .protocol-table-section {
    position: relative;
    z-index: 1;
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 24px 48px;
  }

  .protocol-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 13px;
  }

  .protocol-table th {
    font-family: 'Chakra Petch', sans-serif;
    font-weight: 600;
    font-size: 11px;
    text-transform: uppercase;
    letter-spacing: 2px;
    color: var(--text-muted);
    text-align: left;
    padding: 10px 16px;
    border-bottom: 1px solid var(--border);
  }

  .protocol-table td {
    padding: 12px 16px;
    border-bottom: 1px solid rgba(30,41,59,0.5);
    color: var(--text-secondary);
  }

  .protocol-table tr:hover td { background: rgba(99,102,241,0.03); }

  .legend {
    position: relative;
    z-index: 1;
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 24px 32px;
    display: flex;
    gap: 24px;
    flex-wrap: wrap;
    justify-content: center;
  }

  .legend-item {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 12px;
    color: var(--text-muted);
  }

  .legend-dot { width: 10px; height: 10px; border-radius: 50%; }
  .legend-dot.live { background: #34d399; }
  .legend-dot.planned { background: #fbbf24; border: 1px dashed rgba(251,191,36,0.5); }
  .legend-dot.v25 { background: var(--v25-accent); animation: heartbeat 2.5s ease-in-out infinite; }

  .footer {
    position: relative;
    z-index: 1;
    text-align: center;
    padding: 24px;
    border-top: 1px solid var(--border);
    font-family: 'Share Tech Mono', monospace;
    font-size: 11px;
    color: var(--text-muted);
  }

  .footer a { color: var(--l7); text-decoration: none; }
  .footer a:hover { text-decoration: underline; }
</style>
</head>
<body>

<header class="header">
  <h1>SuperLocalMemory V2</h1>
  <div class="subtitle">10-LAYER UNIVERSAL MEMORY SYSTEM &bull; MCP + A2A DUAL PROTOCOL</div>
  <span class="version-badge">v2.5 &mdash; "Your AI Memory Has a Heartbeat"</span>
</header>

<section class="main" id="mainGrid">

  <div class="protocol-panel mcp">
    <div class="protocol-label mcp">MCP</div>
    <div class="protocol-direction">Agent &rarr; Tool</div>
    <span class="protocol-badge badge-live">LIVE</span>
    <div style="font-size:11px; color:var(--text-muted); text-align:center; margin-top:4px;">
      Model Context Protocol<br>
      <span style="color:var(--mcp-color)">6 tools &bull; 4 resources &bull; 2 prompts</span>
    </div>
    <div class="agent-list">
      <div class="agent-chip">Claude Desktop</div>
      <div class="agent-chip">Claude Code</div>
      <div class="agent-chip">Cursor</div>
      <div class="agent-chip">Windsurf</div>
      <div class="agent-chip">VS Code / Copilot</div>
      <div class="agent-chip">Continue.dev</div>
      <div class="agent-chip">Zed</div>
      <div class="agent-chip" style="color:var(--text-muted); font-style:italic;">+ 9 more IDEs</div>
    </div>
  </div>

  <div class="stack" id="layerStack">
    <div class="layer" data-layer="1">
      <div class="num">01</div>
      <div class="info"><div class="name">Raw Storage</div><div class="file">src/memory_store_v2.py</div></div>
      <div class="tags"><span class="tag">SQLite</span><span class="tag">FTS5</span><span class="tag">TF-IDF</span></div>
    </div>
    <div class="layer" data-layer="2">
      <div class="num">02</div>
      <div class="info"><div class="name">Hierarchical Index</div><div class="file">src/tree_manager.py</div></div>
      <div class="tags"><span class="tag">Parent-Child</span><span class="tag">Breadcrumbs</span></div>
    </div>
    <div class="layer" data-layer="3">
      <div class="num">03</div>
      <div class="info"><div class="name">Knowledge Graph</div><div class="file">src/graph_engine.py</div></div>
      <div class="tags"><span class="tag">Leiden</span><span class="tag">Communities</span><span class="tag">Entities</span></div>
    </div>
    <div class="layer" data-layer="4">
      <div class="num">04</div>
      <div class="info"><div class="name">Pattern Learning</div><div class="file">src/pattern_learner.py</div></div>
      <div class="tags"><span class="tag">MACLA</span><span class="tag">Bayesian</span></div>
    </div>
    <div class="layer" data-layer="5">
      <div class="num">05</div>
      <div class="info"><div class="name">Skills Layer</div><div class="file">skills/*</div></div>
      <div class="tags"><span class="tag">6 Commands</span><span class="tag">Universal</span></div>
    </div>
    <div class="layer" data-layer="6">
      <div class="num">06</div>
      <div class="info"><div class="name">MCP Integration</div><div class="file">mcp_server.py</div></div>
      <div class="tags"><span class="tag">6 Tools</span><span class="tag">4 Resources</span><span class="tag">2 Prompts</span></div>
    </div>
    <div class="layer" data-layer="7">
      <div class="num">07</div>
      <div class="info"><div class="name">Universal Access</div><div class="file">MCP + Skills + CLI</div></div>
      <div class="tags"><span class="tag">3 Methods</span><span class="tag">16+ IDEs</span></div>
    </div>
    <div class="layer" data-layer="8">
      <div class="num">08</div>
      <div class="info"><div class="name">Hybrid Search</div><div class="file">src/hybrid_search.py</div></div>
      <div class="tags"><span class="tag">Semantic</span><span class="tag">FTS5</span><span class="tag">Graph</span></div>
    </div>
    <div class="layer" data-layer="9">
      <div class="num">09</div>
      <div class="info"><div class="name">Visualization</div><div class="file">ui_server.py</div></div>
      <div class="tags"><span class="tag">Dashboard</span><span class="tag">Timeline</span><span class="tag">Graph</span></div>
    </div>
    <div class="layer" data-layer="10">
      <div class="num">10</div>
      <div class="info"><div class="name">A2A Agent Collaboration</div><div class="file">src/a2a_server.py &mdash; PLANNED v2.6</div></div>
      <div class="tags"><span class="tag" style="border:1px dashed rgba(16,185,129,0.4); color:#34d399;">A2A Protocol</span><span class="tag" style="border:1px dashed rgba(251,191,36,0.4); color:#fbbf24;">PLANNED</span></div>
    </div>
  </div>

  <div class="protocol-panel a2a">
    <div class="protocol-label a2a">A2A</div>
    <div class="protocol-direction">Agent &harr; Agent</div>
    <span class="protocol-badge badge-planned">PLANNED v2.6</span>
    <div style="font-size:11px; color:var(--text-muted); text-align:center; margin-top:4px;">
      Agent-to-Agent Protocol<br>
      <span style="color:var(--a2a-color)">Google/LF &bull; 150+ orgs</span>
    </div>
    <div class="agent-list">
      <div class="agent-chip">Perplexity Agent</div>
      <div class="agent-chip">Codex Agent</div>
      <div class="agent-chip">Custom Agents</div>
      <div class="agent-chip" style="font-style:italic; border-style:dashed;">Agent Discovery</div>
      <div class="agent-chip" style="font-style:italic; border-style:dashed;">Task Management</div>
      <div class="agent-chip" style="font-style:italic; border-style:dashed;">Signed Identity</div>
    </div>
    <div style="margin-top:12px; padding:8px 12px; border-radius:6px; background:rgba(16,185,129,0.06); border:1px solid rgba(16,185,129,0.15); font-size:10px; color:var(--text-muted); text-align:center;">
      A2A has NO shared memory.<br>
      <span style="color:var(--a2a-color); font-weight:600;">SLM fills this gap.</span>
    </div>
  </div>

</section>

<section class="v25-section">
  <div class="v25-header">
    <h2>v2.5 Components</h2>
    <span class="tagline">"Your AI Memory Has a Heartbeat"</span>
    <span class="protocol-badge badge-v25">IN DEVELOPMENT</span>
  </div>
  <div class="v25-grid">
    <div class="v25-card prerequisite">
      <span class="prereq-badge">PREREQUISITE</span>
      <div class="card-name">Connection Manager</div>
      <div class="card-file">src/db_connection_manager.py</div>
      <div class="card-desc">SQLite WAL mode, connection pool, thread-safe write queue. Fixes "database locked" errors under concurrent access from CLI + MCP + API.</div>
    </div>
    <div class="v25-card">
      <div class="card-name">Event Bus</div>
      <div class="card-file">src/event_bus.py</div>
      <div class="card-desc">Broadcast memory operations via SSE, WebSocket, and Webhook. Powers real-time dashboard updates. Tiered retention: hot 48h, warm 14d, cold 30d.</div>
    </div>
    <div class="v25-card">
      <div class="card-name">Subscription Manager</div>
      <div class="card-file">src/subscription_manager.py</div>
      <div class="card-desc">Durable and ephemeral subscriptions with filters by agent_id, operation_type, and tags. Survive restarts by default.</div>
    </div>
    <div class="v25-card">
      <div class="card-name">Webhook Dispatcher</div>
      <div class="card-file">src/webhook_dispatcher.py</div>
      <div class="card-desc">HTTP POST to configured URLs on memory events. Integration bridge for external systems and automation pipelines.</div>
    </div>
    <div class="v25-card">
      <div class="card-name">Agent Registry</div>
      <div class="card-file">src/agent_registry.py</div>
      <div class="card-desc">Track agent connections, protocols (MCP/A2A/CLI), statistics, and last_seen timestamps. Foundation for trust enforcement.</div>
    </div>
    <div class="v25-card">
      <div class="card-name">Provenance Tracker</div>
      <div class="card-file">src/provenance_tracker.py</div>
      <div class="card-desc">Track memory origin: created_by, source_protocol, agent_version. Full memory lineage for audit and debugging.</div>
    </div>
    <div class="v25-card">
      <div class="card-name">Trust Scorer</div>
      <div class="card-file">src/trust_scorer.py</div>
      <div class="card-desc">Silent Bayesian trust signal collection using MACLA Beta-Binomial model. Equal start (1.0). Enforcement begins in v2.6.</div>
    </div>
  </div>
</section>

<section class="protocol-table-section">
  <table class="protocol-table">
    <thead>
      <tr><th>Protocol</th><th>Direction</th><th>Purpose</th><th>Analogy</th><th>Status</th></tr>
    </thead>
    <tbody>
      <tr>
        <td style="color:var(--mcp-color); font-weight:600;">MCP</td>
        <td>Agent &rarr; Tool</td>
        <td>AI tool reads/writes memory</td>
        <td style="font-family:'Share Tech Mono',monospace; font-size:11px; color:var(--text-muted);">USB-C port</td>
        <td><span class="protocol-badge badge-live">LIVE</span></td>
      </tr>
      <tr>
        <td style="color:var(--a2a-color); font-weight:600;">A2A</td>
        <td>Agent &harr; Agent</td>
        <td>AI agents collaborate via memory</td>
        <td style="font-family:'Share Tech Mono',monospace; font-size:11px; color:var(--text-muted);">Internet protocol</td>
        <td><span class="protocol-badge badge-planned">v2.6</span></td>
      </tr>
      <tr>
        <td style="color:var(--l5); font-weight:600;">Skills</td>
        <td>User &rarr; Agent &rarr; Memory</td>
        <td>Slash commands in any IDE</td>
        <td style="font-family:'Share Tech Mono',monospace; font-size:11px; color:var(--text-muted);">Terminal shortcut</td>
        <td><span class="protocol-badge badge-live">LIVE</span></td>
      </tr>
      <tr>
        <td style="color:var(--l1); font-weight:600;">CLI</td>
        <td>User &rarr; Memory</td>
        <td>Direct terminal access</td>
        <td style="font-family:'Share Tech Mono',monospace; font-size:11px; color:var(--text-muted);">SSH</td>
        <td><span class="protocol-badge badge-live">LIVE</span></td>
      </tr>
    </tbody>
  </table>
</section>

<div class="legend">
  <div class="legend-item"><div class="legend-dot live"></div> Live</div>
  <div class="legend-item"><div class="legend-dot planned"></div> Planned v2.6</div>
  <div class="legend-item"><div class="legend-dot v25"></div> v2.5 In Development</div>
  <div class="legend-item" style="margin-left:24px; font-family:'Share Tech Mono',monospace; font-size:10px;">Click any layer for details</div>
</div>

<footer class="footer">
  SuperLocalMemory V2 &copy; 2026 Varun Pratap Bhardwaj &bull;
  <a href="https://github.com/varun369/SuperLocalMemoryV2">GitHub</a> &bull;
  MIT License &bull; Local-First &bull; Privacy-First &bull; Free Forever
</footer>

<div class="detail-overlay" id="detailOverlay">
  <div class="detail-card" id="detailCard">
    <button class="close-btn" id="closeBtn">&times;</button>
    <div class="detail-num" id="detailNum"></div>
    <div class="detail-title" id="detailTitle"></div>
    <div class="detail-file" id="detailFile"></div>
    <div class="detail-desc" id="detailDesc"></div>
    <ul class="detail-features" id="detailFeatures"></ul>
    <div class="research-ref" id="detailResearch"></div>
  </div>
</div>

<script>
(function() {
  'use strict';

  var layerData = {
    1: {
      title: 'Raw Storage', file: 'src/memory_store_v2.py', color: '#f59e0b',
      desc: 'The foundation. All memories stored in a single SQLite database with FTS5 full-text search indexing and TF-IDF vector representations. Database: ~/.claude-memory/memory.db',
      features: ['SQLite with FTS5 full-text search index', 'TF-IDF vectors stored as JSON in entity_vector column', 'Importance scoring (1-10) and tiered compression', 'Profile-aware storage for multi-identity support', 'Parameterized queries only \u2014 zero SQL injection surface'],
      research: 'Foundation layer \u2014 standard SQLite with custom extensions'
    },
    2: {
      title: 'Hierarchical Index', file: 'src/tree_manager.py', color: '#f97316',
      desc: 'Organizes memories into parent-child trees. Enables breadcrumb navigation ("Project > Feature > Decision") so AI agents can traverse context from broad to specific.',
      features: ['Parent-child memory relationships via parent_id column', 'Breadcrumb path generation for navigation context', 'Tree traversal for hierarchical recall', 'Automatic depth management'],
      research: 'Based on PageIndex (VectifyAI 2025) \u2014 hierarchical document indexing'
    },
    3: {
      title: 'Knowledge Graph', file: 'src/graph_engine.py', color: '#ef4444',
      desc: 'Extracts entities from memories using TF-IDF, builds relationship graphs, and clusters them using hierarchical Leiden community detection.',
      features: ['TF-IDF entity extraction \u2014 no external APIs needed', 'Hierarchical Leiden clustering for community detection', 'Community summaries for graph-level context', 'Relationship discovery between memories', 'Graph statistics and visualization data export'],
      research: 'GraphRAG (Microsoft arXiv:2404.16130), G-Memory (arXiv:2506.07398)'
    },
    4: {
      title: 'Pattern Learning', file: 'src/pattern_learner.py', color: '#ec4899',
      desc: 'Learns user coding preferences, terminology, and framework choices over time. Uses MACLA Beta-Binomial Bayesian confidence scoring to distinguish real patterns from noise.',
      features: ['MACLA Beta-Binomial Bayesian confidence scoring', 'Learns coding style, naming conventions, framework preferences', 'Identity pattern recognition', 'Confidence thresholds prevent false pattern detection', 'Continuous learning from every interaction'],
      research: 'MACLA (arXiv:2512.18950), MemoryBank (AAAI 2024), Hindsight (arXiv:2512.12818)'
    },
    5: {
      title: 'Skills Layer', file: 'skills/*', color: '#a855f7',
      desc: 'Six universal slash-command skills that work across Claude Code, Continue.dev, Cody, Cursor, Windsurf, and other IDEs supporting the skills protocol.',
      features: ['/remember \u2014 Save a memory with tags and project context', '/recall \u2014 Search memories by natural language query', '/list-recent \u2014 Show latest N memories', '/status \u2014 System health check and statistics', '/build-graph \u2014 Rebuild knowledge graph', '/switch-profile \u2014 Change active identity profile'],
      research: 'Universal skills protocol \u2014 cross-IDE compatibility layer'
    },
    6: {
      title: 'MCP Integration', file: 'mcp_server.py', color: '#8b5cf6',
      desc: 'Model Context Protocol server exposing memory operations as structured tools, resources, and prompts. Primary real-time integration for AI IDEs.',
      features: ['6 MCP tools: remember, recall, search, list, status, graph', '4 MCP resources: recent memories, stats, graph data, patterns', '2 MCP prompts: analyze-memory, suggest-recall', '700+ lines of production code', 'Singleton pattern needed for v2.5 (shared state)'],
      research: 'Model Context Protocol (Anthropic, 2024) \u2014 agent-to-tool standard'
    },
    7: {
      title: 'Universal Access', file: 'MCP + Skills + CLI', color: '#6366f1',
      desc: 'Three independent access methods all share the same SQLite database. Any memory saved from any tool is instantly available to all others.',
      features: ['MCP Protocol \u2014 real-time, IDE-integrated', 'Universal Skills \u2014 slash commands across 16+ IDEs', 'CLI (slm command) \u2014 terminal and scripts', 'All methods share one ~/.claude-memory/memory.db', 'A2A becomes the 4th access method in v2.6'],
      research: 'Multi-level Retrieval: A-RAG (arXiv:2602.03442)'
    },
    8: {
      title: 'Hybrid Search', file: 'src/hybrid_search.py', color: '#3b82f6',
      desc: 'Combines three search strategies \u2014 semantic similarity, FTS5 full-text, and knowledge graph traversal \u2014 into a unified retrieval pipeline with score fusion.',
      features: ['Semantic search via TF-IDF cosine similarity', 'FTS5 full-text search with BM25 ranking', 'Graph-aware search traversing community clusters', 'Score fusion combining all three signals', 'Optional: BM25, HNSW, neural embeddings add-ons'],
      research: 'Combines techniques from GraphRAG + A-RAG + PageIndex'
    },
    9: {
      title: 'Visualization', file: 'ui_server.py', color: '#06b6d4',
      desc: 'Interactive web dashboard at localhost:8765. Memory timeline, knowledge graph explorer, pattern viewer. Designed for non-technical users too.',
      features: ['Interactive web dashboard at http://localhost:8765', 'Memory timeline with search and filters', 'Knowledge graph visualization with cluster view', 'Pattern and preference viewer', 'v2.5: Real-time SSE event stream, agent connections panel'],
      research: 'Dashboard for non-technical users \u2014 no jargon, visual-first'
    },
    10: {
      title: 'A2A Agent Collaboration', file: 'src/a2a_server.py \u2014 PLANNED v2.6', color: '#10b981',
      desc: 'Agent-to-Agent Protocol (Google/Linux Foundation, 2025). Enables AI agents to discover SLM via Agent Card. A2A has NO shared memory \u2014 SLM fills that gap.',
      features: ['JSON-RPC 2.0 + SSE streaming transport', 'Agent Card at /.well-known/agent-card.json', 'Agent discovery, task management, broadcasting', 'Ed25519 signed security cards for identity', 'SLM = the shared memory layer A2A was missing', '150+ organizations in A2A TSC'],
      research: 'A2A Protocol (Google/LF 2025), Multi-Agent Blackboard (arXiv:2510.01285)'
    }
  };

  function showDetail(num) {
    var d = layerData[num];
    if (!d) return;

    var numEl = document.getElementById('detailNum');
    var titleEl = document.getElementById('detailTitle');
    var fileEl = document.getElementById('detailFile');
    var descEl = document.getElementById('detailDesc');
    var featEl = document.getElementById('detailFeatures');
    var resEl = document.getElementById('detailResearch');
    var card = document.getElementById('detailCard');

    numEl.textContent = String(num).padStart(2, '0');
    numEl.style.color = d.color;
    titleEl.textContent = d.title;
    titleEl.style.color = d.color;
    fileEl.textContent = d.file;
    descEl.textContent = d.desc;

    while (featEl.firstChild) { featEl.removeChild(featEl.firstChild); }
    d.features.forEach(function(f) {
      var li = document.createElement('li');
      li.textContent = f;
      li.style.borderLeftColor = d.color;
      featEl.appendChild(li);
    });

    resEl.textContent = d.research;
    card.style.borderColor = d.color + '40';
    document.getElementById('detailOverlay').classList.add('active');
  }

  function closeDetail() {
    document.getElementById('detailOverlay').classList.remove('active');
  }

  var layers = document.querySelectorAll('.layer');
  layers.forEach(function(layer) {
    layer.addEventListener('click', function() {
      var num = parseInt(this.getAttribute('data-layer'), 10);
      showDetail(num);
    });
  });

  document.getElementById('closeBtn').addEventListener('click', closeDetail);

  document.getElementById('detailOverlay').addEventListener('click', function(e) {
    if (e.target === this) closeDetail();
  });

  document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') closeDetail();
  });
})();
</script>

</body>
</html>
